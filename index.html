
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Home Loan Preapproval Calculator</title>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-NJ33CDF4N2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-NJ33CDF4N2');
  </script>

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

  <style>
    html {
      scroll-behavior: smooth;
      scroll-padding-top: 5rem;
    }
    #aboutPanel {
      transition: transform 0.3s ease-in-out;
    }
    #aboutPanel.hidden {
      transform: translateX(100%);
    }
    #aboutPanel.visible {
      transform: translateX(0%);
    }
  </style>
</head>
<body class="bg-gradient-to-b from-blue-50 to-white min-h-screen relative">
  <!-- NAVIGATION -->
  <nav class="bg-white shadow-md py-4 px-6 mb-8 sticky top-0 z-50">
    <div class="max-w-7xl mx-auto flex justify-between items-center">
      <h1 class="text-2xl font-bold text-blue-700">üè† Home Loan Preapproval</h1>
      <ul class="flex space-x-4 text-gray-600 font-medium">
        <li><a href="#calculator" class="hover:text-blue-600">Calculator</a></li>
        <li><a href="#result" class="hover:text-blue-600">Results</a></li>
        <li><button id="aboutBtn" class="hover:text-blue-600">About</button></li>
      </ul>
    </div>
  </nav>

  <!-- MAIN CONTENT -->
  <main class="flex items-center justify-center px-4" id="calculator">
    <div class="w-full max-w-3xl p-8 bg-white rounded-2xl shadow-xl">
      <h2 class="text-3xl font-bold text-center text-blue-800 mb-8">Home Loan Preapproval Calculator</h2>

      <!-- FORM -->
      <form id="calculatorForm" class="space-y-6">
        <div>
          <label for="applicantType" class="block text-gray-700 font-medium">Application Type</label>
          <select id="applicantType" class="w-full border border-gray-300 rounded px-3 py-2">
            <option value="single">Single</option>
            <option value="partner">Partner</option>
          </select>
        </div>

        <fieldset>
          <legend class="text-blue-700 font-semibold">Applicant 1</legend>
          <input type="number" id="income1" placeholder="Monthly Income" class="w-full border rounded px-3 py-2 mt-2" required>
          <input type="number" id="debts1" placeholder="Monthly Debts" class="w-full border rounded px-3 py-2 mt-2" required>
          <input type="number" id="creditScore1" placeholder="Credit Score" class="w-full border rounded px-3 py-2 mt-2" required>
        </fieldset>

        <fieldset id="applicant2Section" class="hidden">
          <legend class="text-blue-700 font-semibold">Applicant 2</legend>
          <input type="number" id="income2" placeholder="Monthly Income" class="w-full border rounded px-3 py-2 mt-2">
          <input type="number" id="debts2" placeholder="Monthly Debts" class="w-full border rounded px-3 py-2 mt-2">
          <input type="number" id="creditScore2" placeholder="Credit Score" class="w-full border rounded px-3 py-2 mt-2">
        </fieldset>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <div>
            <label for="loanType" class="block text-gray-700 font-medium">Loan Type</label>
            <select id="loanType" class="w-full border border-gray-300 rounded px-3 py-2">
              <option value="conventional">Conventional</option>
              <option value="fha">FHA</option>
              <option value="va">VA</option>
            </select>
          </div>
          <div>
            <label for="loanTerm" class="block text-gray-700 font-medium">Loan Term (Years)</label>
            <select id="loanTerm" class="w-full border border-gray-300 rounded px-3 py-2">
              <option value="15">15</option>
              <option value="20">20</option>
              <option value="30" selected>30</option>
            </select>
          </div>
          <div>
            <label for="downPayment" class="block text-gray-700 font-medium">Down Payment (%)</label>
            <input type="number" id="downPayment" value="10" class="w-full border border-gray-300 rounded px-3 py-2">
          </div>
        </div>

        <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded">Calculate</button>
      </form>

      <div id="result" class="mt-6 text-lg text-center text-gray-800 font-medium"></div>
      <canvas id="chart" class="mt-4 mx-auto"></canvas>
    </div>
  </main>

  <!-- ABOUT SLIDE PANEL -->
  <div id="aboutPanel" class="fixed top-0 right-0 w-full sm:w-1/2 md:w-1/3 h-full bg-white shadow-lg z-50 hidden px-6 py-10 overflow-auto border-l">
    <button onclick="toggleAbout()" class="text-gray-500 hover:text-gray-700 text-right w-full text-sm mb-4">Close ‚úñ</button>
    <h2 class="text-2xl font-bold text-blue-700 mb-4">üìò About This Tool</h2>
    <p class="text-gray-700 mb-4">
      This home loan preapproval calculator helps estimate the maximum home price and monthly mortgage payment based on your income, debts, and selected loan type. It's ideal for both single and joint applicants looking to plan their home purchase.
    </p>
    <h3 class="text-lg font-semibold text-gray-800 mt-6 mb-2">üßÆ Formulas Used:</h3>
    <ul class="list-disc ml-6 text-gray-700 space-y-2">
      <li><strong>Total Income:</strong> Monthly income of applicant 1 + applicant 2</li>
      <li><strong>Total Debts:</strong> Monthly debts of applicant 1 + applicant 2</li>
      <li><strong>Maximum Allowable DTI:</strong> 43% (industry standard)</li>
      <li><strong>Available for Mortgage:</strong> (Total Income √ó 0.43) ‚àí Total Debts</li>
      <li><strong>Monthly Rate:</strong> 7% annual rate √∑ 12 months</li>
      <li><strong>Loan Amount:</strong> (Available for Mortgage √ó (1 - (1 + r)^-n)) √∑ r</li>
      <li><strong>Home Price:</strong> Loan Amount √∑ (1 - (Down Payment % / 100))</li>
    </ul>
  </div>

  <script>
    document.getElementById('applicantType').addEventListener('change', function () {
      const isPartner = this.value === 'partner';
      document.getElementById('applicant2Section').classList.toggle('hidden', !isPartner);
    });

    function toggleAbout() {
      const panel = document.getElementById('aboutPanel');
      panel.classList.toggle('hidden');
      panel.classList.toggle('visible');
    }

    document.getElementById('aboutBtn').addEventListener('click', toggleAbout);
  </script>
</body>
</html>
